import{K as N,a as H,az as I,aD as F,aH as w,a1 as B,b as z,e as j,G as U,aJ as V,aa as q,n as E,ah as _,m as c,p as f,Y as g,S as G,q as h,F as J,a7 as K,M as A,X as R}from"./vue.48bd3665.js";import{l as X,u as Y,e as u,z as Q,_ as W}from"./index.20f86bbc.js";const Z=N({name:"layoutColumnsAside",setup(){const t=H([]),r=H(),d=X(),M=Y(),{routesList:y,isColumnsMenuHover:$,isColumnsNavHover:p}=I(d),{themeConfig:C}=I(M),n=F(),a=w(),e=B({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[]}),S=s=>{e.liIndex=s,r.value.style.top=`${t.value[s].offsetTop+e.difference}px`},O=(s,o)=>{S(o);let{path:l,redirect:i}=s;i?a.push(i):a.push(l)},k=(s,o)=>{if(!C.value.isColumnsMenuHoverPreload)return!1;let{path:l}=s;e.liOldPath=l,e.liOldIndex=o,e.liHoverIndex=o,u.emit("setSendColumnsChildren",m(l)),d.setColumnsMenuHover(!1),d.setColumnsNavHover(!0)},T=async()=>{await d.setColumnsNavHover(!1),setTimeout(()=>{!$&&!p&&u.emit("restoreDefault")},100)},v=s=>{E(()=>{S(s)})},b=()=>{e.columnsAsideList=L(y.value);const s=m(n.path);if(Object.keys(s).length<=0)return!1;v(s.item[0].k),u.emit("setSendColumnsChildren",s)},m=s=>{const o=s.split("/");let l={};return e.columnsAsideList.map((i,P)=>{i.path===`/${o[1]}`&&(i.k=P,l.item=[{...i}],l.children=[{...i}],i.children&&(l.children=i.children))}),l},L=s=>s.filter(o=>!o.meta.isHide).map(o=>(o=Object.assign({},o),o.children&&(o.children=L(o.children)),o)),D=s=>{e.routeSplit=s.split("/"),e.routeSplit.shift();const o=`/${e.routeSplit[0]}`,l=e.columnsAsideList.find(i=>i.path===o);if(!l)return!1;setTimeout(()=>{v(l.k)},0)};return z(Q.state,s=>{if(s.themeConfig.themeConfig.columnsAsideStyle==="columnsRound"?e.difference=3:e.difference=0,!s.routesList.isColumnsMenuHover&&!s.routesList.isColumnsNavHover)e.liHoverIndex=null,u.emit("setSendColumnsChildren",m(n.path));else{if(e.liHoverIndex=e.liOldIndex,!e.liOldPath)return!1;u.emit("setSendColumnsChildren",m(e.liOldPath))}},{deep:!0}),j(()=>{b(),u.on("restoreDefault",()=>{e.liOldIndex=null,e.liOldPath=null})}),U(()=>{u.off("restoreDefault",()=>{})}),V(s=>{D(s.path),u.emit("setSendColumnsChildren",m(s.path))}),{themeConfig:C,columnsAsideOffsetTopRefs:t,columnsAsideActiveRef:r,onColumnsAsideDown:v,onColumnsAsideMenuClick:O,onColumnsAsideMenuMouseenter:k,onColumnsAsideMenuMouseleave:T,...q(e)}}});const x={class:"layout-columns-aside"},ee=["onClick","onMouseenter","title"],se={class:"columns-vertical-title font12"},te=["href"],ne={class:"columns-vertical-title font12"};function oe(t,r,d,M,y,$){const p=_("SvgIcon"),C=_("el-scrollbar");return c(),f("div",x,[g(C,null,{default:G(()=>[h("ul",{onMouseleave:r[0]||(r[0]=n=>t.onColumnsAsideMenuMouseleave())},[(c(!0),f(J,null,K(t.columnsAsideList,(n,a)=>(c(),f("li",{key:a,onClick:e=>t.onColumnsAsideMenuClick(n,a),onMouseenter:e=>t.onColumnsAsideMenuMouseenter(n,a),ref_for:!0,ref:e=>{e&&(t.columnsAsideOffsetTopRefs[a]=e)},class:A({"layout-columns-active":t.liIndex===a,"layout-columns-hover":t.liHoverIndex===a}),title:t.$t(n.meta.title)},[!n.meta.isLink||n.meta.isLink&&n.meta.isIframe?(c(),f("div",{key:0,class:A(t.themeConfig.columnsAsideLayout)},[g(p,{name:n.meta.icon},null,8,["name"]),h("div",se,R(t.$t(n.meta.title)&&t.$t(n.meta.title).length>=4?t.$t(n.meta.title).substr(0,t.themeConfig.columnsAsideLayout==="columns-vertical"?4:3):t.$t(n.meta.title)),1)],2)):(c(),f("div",{key:1,class:A(t.themeConfig.columnsAsideLayout)},[h("a",{href:n.meta.isLink,target:"_blank"},[g(p,{name:n.meta.icon},null,8,["name"]),h("div",ne,R(t.$t(n.meta.title)&&t.$t(n.meta.title).length>=4?t.$t(n.meta.title).substr(0,t.themeConfig.columnsAsideLayout==="columns-vertical"?4:3):t.$t(n.meta.title)),1)],8,te)],2))],42,ee))),128)),h("div",{ref:"columnsAsideActiveRef",class:A(t.themeConfig.columnsAsideStyle)},null,2)],32)]),_:1})])}const ae=W(Z,[["render",oe],["__scopeId","data-v-d528cad8"]]);export{ae as default};
