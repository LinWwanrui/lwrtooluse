import{f as A,u as I,e as d,S as L,d as k,_ as C}from"./index.20f86bbc.js";import{K as P,aC as B,aD as D,aH as E,az as v,a1 as S,f as u,J as $,n as w,e as U,G as M,b as O,aa as b,m as f,p as z,Y as i,S as l,_ as R,ah as _,R as g,T as y,Z as K,U as G,aI as H}from"./vue.48bd3665.js";const J=P({name:"layoutParentView",components:{Iframes:B(()=>k(()=>import("./iframes.b71082a6.js"),["./iframes.b71082a6.js","./vue.48bd3665.js","./index.20f86bbc.js","./index.52abd502.css"],import.meta.url))},setup(){const e=D(),c=E(),p=A(),h=I(),{keepAliveNames:o,cachedViews:r}=v(p),{themeConfig:t}=v(h),s=S({refreshRouterViewKey:"",iframeRefreshKey:"",keepAliveNameList:[],iframeList:[]}),n=u(()=>t.value.animation),T=u(()=>t.value.isTagsview?r.value:s.keepAliveNameList),N=u(()=>e.meta.isIframe),V=async()=>{c.getRoutes().forEach(a=>{a.meta.isIframe&&(a.meta.isIframeOpen=!1,a.meta.loading=!0,s.iframeList.push({...a}))})};return $(()=>{s.keepAliveNameList=o.value,d.on("onTagsViewRefreshRouterView",a=>{s.keepAliveNameList=o.value.filter(m=>e.name!==m),s.refreshRouterViewKey="",s.iframeRefreshKey="",w(()=>{s.refreshRouterViewKey=a,s.iframeRefreshKey=a,s.keepAliveNameList=o.value})})}),U(()=>{V(),w(()=>{setTimeout(()=>{var a;t.value.isCacheTagsView&&(r.value=(a=L.get("tagsViewList"))==null?void 0:a.map(m=>m.name))},0)})}),M(()=>{d.off("onTagsViewRefreshRouterView",()=>{})}),O(()=>e.fullPath,()=>{s.refreshRouterViewKey=decodeURI(e.fullPath)},{immediate:!0}),{route:e,setTransitionName:n,getKeepAliveNames:T,isIframePage:N,...b(s)}}}),Y={class:"layout-parent"};function Z(e,c,p,h,o,r){const t=_("router-view"),s=_("Iframes");return f(),z("div",Y,[i(t,null,{default:l(({Component:n})=>[i(R,{name:e.setTransitionName,mode:"out-in"},{default:l(()=>[(f(),g(H,{include:e.getKeepAliveNames},[y((f(),g(G(n),{key:e.refreshRouterViewKey,class:"w100"})),[[K,!e.isIframePage]])],1032,["include"]))]),_:2},1032,["name"])]),_:1}),i(R,{name:e.setTransitionName,mode:"out-in"},{default:l(()=>[y(i(s,{class:"w100",refreshKey:e.iframeRefreshKey,name:e.setTransitionName,list:e.iframeList},null,8,["refreshKey","name","list"]),[[K,e.isIframePage]])]),_:1},8,["name"])])}const F=C(J,[["render",Z]]);export{F as default};
