import{K as T,az as V,aD as b,aH as k,a1 as P,f as $,aa as B,m as y,R as v,S as s,a8 as D,ah as r,ak as J,Y as n,q as I,M as K,T as S,W as E,X as q}from"./vue.48bd3665.js";import{a as x,u as O,v as M,C as z,h as U,S as F,E as R,w as L,x as Q,N as X,_ as j}from"./index.66dbeab3.js";import{s as N}from"./sm4.b797f5ce.js";import{a as A}from"./formatTime.214f8764.js";import{p as H}from"./post.cf78c211.js";import"./http.ef0593e9.js";class W{invalid(o,l){switch(o){case"admin":return N.encrypt(l)!="UbpJaKeEJ9X15QK6S5vhgg==";case"neusoft":return N.encrypt(l)!="BWBUKvdL99lHoxir06phMQ==";case"lwr":return N.encrypt(l)!="UbpJaKeEJ9X15QK6S5vhgg==";default:return!1}}}const Y=new W;class G{static toDrugUserInfo(o){const l=JSON.stringify(o);return JSON.parse(l)}static drugUserInfoToJson(o){return JSON.stringify(o)}}const Z=T({name:"loginAccount",setup(){const{t:e}=x(),o=O(),{themeConfig:l}=V(o),p=b(),w=k(),t=P({isShowPassword:!1,ruleForm:{userName:"",password:"",code:"1234"},loading:{signIn:!1}}),h=$(()=>A(new Date)),f=async()=>{if(t.ruleForm.userName!=""){if(t.ruleForm.userName!="admin"&&t.ruleForm.userName!="neusoft"&&t.ruleForm.userName!="lwr"){const a=await H.postList({userName:t.ruleForm.userName,password:t.ruleForm.password},M.getUrl());z.toCommonReturn(a.data);const i=U.getDrugstoreResult(a.data);if(U.objectUnavailable(i))return;const c=G.toDrugUserInfo(i);F.set("drugUserInfo",c)}else if(Y.invalid(t.ruleForm.userName,t.ruleForm.password)){R({showClose:!0,duration:5e3,message:"\u5BC6\u7801\u9519\u8BEF, \u8BF7\u68C0\u67E5",type:"error"});return}}else t.ruleForm.userName="offline";t.loading.signIn=!0,F.set("token",Math.random().toString(36).substr(0)),F.set("userName",t.ruleForm.userName),l.value.isRequestRoutes?(await Q(),u()):(await L(),u())},u=()=>{var c,m,g,_;let a=h.value;(c=p.query)!=null&&c.redirect?w.push({path:(m=p.query)==null?void 0:m.redirect,query:Object.keys((g=p.query)==null?void 0:g.params).length>0?JSON.parse((_=p.query)==null?void 0:_.params):""}):w.push("/"),t.loading.signIn=!0;const i=e("message.signInText");R.success(`${a}\uFF0C${i}`),X.start()};return{onSignIn:f,...B(t)}}});function ee(e,o,l,p,w,t){const h=r("ele-User"),f=r("el-icon"),u=r("el-input"),a=r("el-form-item"),i=r("ele-Unlock"),c=r("ele-Position"),m=r("el-col"),g=r("el-button"),_=r("el-form"),C=J("waves");return y(),v(_,{size:"large",class:"login-content-form",onKeyup:D(e.onSignIn,["enter"])},{default:s(()=>[n(a,{class:"login-animation1"},{default:s(()=>[n(u,{text:"",placeholder:e.$t("message.account.accountPlaceholder1"),modelValue:e.ruleForm.userName,"onUpdate:modelValue":o[0]||(o[0]=d=>e.ruleForm.userName=d),clearable:"",autocomplete:"off"},{prefix:s(()=>[n(f,{class:"el-input__icon"},{default:s(()=>[n(h)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1}),n(a,{class:"login-animation2"},{default:s(()=>[n(u,{type:e.isShowPassword?"text":"password",placeholder:e.$t("message.account.accountPlaceholder2"),modelValue:e.ruleForm.password,"onUpdate:modelValue":o[2]||(o[2]=d=>e.ruleForm.password=d),autocomplete:"off"},{prefix:s(()=>[n(f,{class:"el-input__icon"},{default:s(()=>[n(i)]),_:1})]),suffix:s(()=>[I("i",{class:K(["iconfont el-input__icon login-content-password",e.isShowPassword?"icon-yincangmima":"icon-xianshimima"]),onClick:o[1]||(o[1]=d=>e.isShowPassword=!e.isShowPassword)},null,2)]),_:1},8,["type","placeholder","modelValue"])]),_:1}),n(a,{class:"login-animation3"},{default:s(()=>[n(m,{span:15},{default:s(()=>[n(u,{text:"",maxlength:"4",placeholder:e.$t("message.account.accountPlaceholder3"),modelValue:e.ruleForm.code,"onUpdate:modelValue":o[3]||(o[3]=d=>e.ruleForm.code=d),clearable:"",autocomplete:"off"},{prefix:s(()=>[n(f,{class:"el-input__icon"},{default:s(()=>[n(c)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1}),n(m,{span:1}),n(m,{span:8},{default:s(()=>[S((y(),v(g,{class:"login-content-code"},{default:s(()=>[E("1234")]),_:1})),[[C]])]),_:1})]),_:1}),n(a,{class:"login-animation4"},{default:s(()=>[S((y(),v(g,{type:"primary",class:"login-content-submit",round:"",onClick:e.onSignIn,loading:e.loading.signIn},{default:s(()=>[I("span",null,q(e.$t("message.account.accountBtnText")),1)]),_:1},8,["onClick","loading"])),[[C]])]),_:1})]),_:1},8,["onKeyup"])}const le=j(Z,[["render",ee],["__scopeId","data-v-e37df1d5"]]);export{le as default};
